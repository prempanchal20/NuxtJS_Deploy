import{a as E,p as I,r as V,o,h as u,f as e,F as _,q as L,s as F,u as n,t as f,v as y,x as P,i as r,w as a,l as p,y as R,z as T,A,k as U,B as Q,C as X,D as ee,E as te,G as ne,H as k,c as w,I as S,J as oe,K as le,L as ie}from"./entry.f02d2ccc.js";import{_ as se}from"./FilepathItem.vue.063a2cdd.js";import{_ as ae}from"./NPanelGrids.923427b0.js";import{_ as re}from"./PanelLeftRight.vue.5807516f.js";import{_ as ue}from"./NTip.vue.16191ba5.js";import{_ as de}from"./NCodeBlock.vue.e2044e41.js";import{_ as ce}from"./NCheckbox.vue.f53d5fde.js";import{_ as me}from"./HelpFab.vue.044c905c.js";import"./editor.721868d4.js";import"./client.4ef5790f.js";import"./NIconButton.vue.6924c323.js";const _e={"h-full":"",grid:"~ rows-[max-content_1fr]"},fe={flex:"~ wrap","w-full":""},pe=["onClick"],ve=e("div",{border:"b base","flex-auto":""},null,-1),he={key:0,flex:"~ col gap-4 items-center justify-center",p4:""},xe=e("div",{"flex-auto":""},null,-1),ye={grid:"~ cols-[30px_1fr] gap-x-2 gap-y-3 items-center justify-center","w-100":""},$e=e("div",{"i-carbon-commit":"","text-xl":""},null,-1),be=e("div",{"text-sm":"",op50:""}," Name ",-1),ge=e("div",{"i-carbon-time":"","text-xl":""},null,-1),we=e("div",{"text-sm":"",op50:""}," Build duration ",-1),ze=e("div",{"i-carbon-cics-program":"","text-xl":""},null,-1),Be=e("div",{"text-sm":"",op50:""}," Client bundle size ",-1),ke=e("div",{"i-carbon-bare-metal-server":"","text-xl":""},null,-1),Ce=e("div",{"text-sm":"",op50:""}," Nitro bundle size ",-1),Ne=e("div",{"i-carbon-edge-node":"","text-xl":""},null,-1),Te=e("div",{"text-sm":"",op50:""}," Built ",-1),Ae=e("div",{"i-carbon:folder-parent":"","text-xl":""},null,-1),De=e("div",{"text-sm":"",op50:""}," Report Path ",-1),Ie=e("div",{"flex-auto":""},null,-1),D="/__nuxt_devtools__/analyze/",Ve=E({__name:"BuildAnalyzeDetails",props:{current:null,prev:null},setup(i){const v=i,h=I(()=>{const t=[{name:"Overview",id:"overview"}];return v.current.features.bundleClient&&t.push({name:"Client Bundle",id:"bundle-client"}),v.current.features.bundleNitro&&t.push({name:"Nitro Bundle",id:"bundle-nitro"}),v.current.features.viteInspect&&t.push({name:"Vite Inspect",id:"vite-inspect"}),t}),s=V(h.value[0]);function b(t){return t<1024?`${t}B`:t<1024*1024?`${(t/1024).toFixed(1)}KB`:t<1024*1024*1024?`${(t/1024/1024).toFixed(1)}MB`:`${(t/1024/1024/1024).toFixed(1)}GB`}function g(t){return`${((t.endTime-t.startTime)/1e3).toFixed(1)}s`}return(t,l)=>{const C=se,z=U;return o(),u("div",_e,[e("div",fe,[(o(!0),u(_,null,L(n(h),(x,N)=>(o(),u("button",{key:N,px4:"",py2:"",border:"r base",hover:"bg-active",class:F(x.id===n(s).id?"":"border-b"),onClick:c=>s.value=x},[e("div",{class:F(x.id===n(s).id?"":"op30")},f(x.name),3)],10,pe))),128)),ve]),n(s).id==="overview"?(o(),u("div",he,[xe,e("div",ye,[$e,e("div",null,[be,e("div",null,f(i.current.name),1)]),ge,e("div",null,[we,e("div",null,f(g(i.current)),1)]),i.current.size?.clientBundle?(o(),u(_,{key:0},[ze,e("div",null,[Be,e("div",null,f(b(i.current.size.clientBundle)),1)])],64)):y("",!0),i.current.size.nitroBundle?(o(),u(_,{key:1},[ke,e("div",null,[Ce,e("div",null,f(b(i.current.size.nitroBundle)),1)])],64)):y("",!0),Ne,e("div",null,[Te,e("div",null,f(n(P)(new Date(i.current.endTime))),1)]),Ae,e("div",null,[De,r(C,{filepath:i.current.analyzeDir},null,8,["filepath"])])]),Ie,r(z,{n:"rose",icon:"carbon-delete",onClick:l[0]||(l[0]=x=>("rpc"in t?t.rpc:n(R)).clearAnalyzeBuilds([i.current.name]))},{default:a(()=>[p(" Delete this report ")]),_:1})])):y("",!0),l._lazyshow1||n(s).id==="bundle-client"?(l._lazyshow1=!0,o(),u(_,null,[T(e("iframe",{src:`${D}${i.current.slug}/client.html`,"h-full":"","w-full":""},null,8,["src"]),[[A,n(s).id==="bundle-client"]])],64)):y("v-show-if",!0),l._lazyshow2||n(s).id==="bundle-nitro"?(l._lazyshow2=!0,o(),u(_,null,[T(e("iframe",{src:`${D}${i.current.slug}/nitro.html`,"h-full":"","w-full":""},null,8,["src"]),[[A,n(s).id==="bundle-nitro"]])],64)):y("v-show-if",!0),l._lazyshow3||n(s).id==="vite-inspect"?(l._lazyshow3=!0,o(),u(_,null,[T(e("iframe",{src:`${D}${i.current.slug}/.vite-inspect/`,"h-full":"","w-full":""},null,8,["src"]),[[A,n(s).id==="vite-inspect"]])],64)):y("v-show-if",!0)])}}}),Fe={class:"markdown-body"},Re=e("h1",null,"Build Analyze",-1),Se=e("p",null,[p("DevTools provides a build analyze tool to help you understand the size of your app in production. Whenever you start a new build, it runs the command "),e("code",null,"nuxt build --analyze"),p(" and present the output data directly in DevTools for easy browsing and comparing.")],-1),Ee=[Re,Se],Le={__name:"analyze-build",setup(i,{expose:v}){return v({frontmatter:{}}),(s,b)=>(o(),u("div",Fe,Ee))}},Pe={flex:"~ col"},Ue={flex:"~ gap-1 items-center","text-sm":"",op60:""},je=e("div",{"i-carbon-time":""},null,-1),Ge=e("div",{"flex-auto":""},null,-1),qe=e("div",{"x-divider":""},null,-1),He={flex:"~ items-center justify-center",p4:""},Ke={flex:"~ col gap-1","w-250":"",p4:""},Oe=e("h3",{class:"text-lg font-medium leading-6",mb2:""}," Start analyze build? ",-1),Je=e("p",{op50:""}," Enter the name of the build: ",-1),Me=e("div",{my3:"","x-divider":""},null,-1),We=e("p",{op50:""}," The following command will be executed in your terminal: ",-1),Ye={flex:"~ gap-3",mt2:"","justify-end":""},rt=E({__name:"analyze-build",setup(i){const v=Q(),h=X(),s=ee(),b=te(),g=I(()=>{const c=b.query.slug;return h.value?.builds.find(m=>m.slug===c)??h.value?.builds[0]}),t=V(!1),l=V(""),C=I(()=>h.value?.builds.some(c=>c.name===l.value.trim()));async function z(){l.value=await R.generateAnalyzeBuildName(),await v.start()&&(k.value={name:l.value,processId:await R.startAnalyzeBuild(l.value)},t.value&&x())}function x(){k.value?.processId&&s.push(`/modules/terminals?id=${encodeURIComponent(k.value.processId)}`)}function N(c){return`${((c.endTime-c.startTime)/1e3).toFixed(1)}s`}return ne(()=>[{id:"analyze-build: start",title:"Start a new analyze build",icon:"i-carbon-edge-node",action:z}]),(c,m)=>{const j=oe,B=U,G=Ve,q=ae,H=re,K=le,O=ue,J=de,M=ce,W=ie,Y=Le,Z=me;return o(),u(_,null,[r(H,{"left-size":20},{left:a(()=>[e("div",Pe,[(o(!0),u(_,null,L(n(h)?.builds,d=>(o(),u(_,{key:d.slug},[r(j,{flex:"~ col gap1","hover:bg-active":"",p3:"",class:F(d.slug===n(g)?.slug?"text-primary bg-active":""),to:`?slug=${encodeURIComponent(d.slug)}`},{default:a(()=>[e("code",null,f(d.name),1),e("div",Ue,[je,e("span",null,f(N(d)),1),Ge,e("span",null,f(n(P)(new Date(d.endTime))),1)])]),_:2},1032,["class","to"]),qe],64))),128)),e("div",He,[("processAnalyzeBuildInfo"in c?c.processAnalyzeBuildInfo:n(k))?(o(),w(B,{key:1,n:"primary",icon:"carbon-circle-dash animate-spin",onClick:m[1]||(m[1]=d=>x())},{default:a(()=>[p(" Building... ")]),_:1})):(o(),w(B,{key:0,n:"primary",icon:"carbon-edge-node",onClick:m[0]||(m[0]=d=>z())},{default:a(()=>[p(" Start a new build ")]),_:1}))])])]),right:a(()=>[n(g)?(o(),w(G,{key:0,current:n(g)},null,8,["current"])):(o(),w(q,{key:1}))]),_:1}),r(n(v),null,{default:a(({resolve:d})=>[r(W,{"model-value":!0,onClose:$=>d(!1)},{default:a(()=>[e("div",Ke,[Oe,Je,r(K,{modelValue:n(l),"onUpdate:modelValue":m[2]||(m[2]=$=>S(l)?l.value=$:null),placeholder:"Build name"},null,8,["modelValue"]),n(C)?(o(),w(O,{key:0,"n-orange":""},{default:a(()=>[p(" A build with the same name already exists, continue would overrides the previous build result. ")]),_:1})):y("",!0),Me,We,r(J,{code:`npx nuxi analyze --no-serve --name=${n(l)}`,lang:"bash",px4:"",py2:"",border:"~ base rounded",lines:!1},null,8,["code"]),r(M,{modelValue:n(t),"onUpdate:modelValue":m[3]||(m[3]=$=>S(t)?t.value=$:null),mt2:"",n:"primary"},{default:a(()=>[p(" Navigate to terminal ")]),_:1},8,["modelValue"]),e("div",Ye,[r(B,{onClick:$=>d(!1)},{default:a(()=>[p(" Cancel ")]),_:2},1032,["onClick"]),r(B,{n:"solid primary",onClick:$=>d(!0)},{default:a(()=>[p(" Start ")]),_:2},1032,["onClick"])])])]),_:2},1032,["onClose"])]),_:1}),r(Z,null,{default:a(()=>[r(Y)]),_:1})],64)}}});export{rt as default};
