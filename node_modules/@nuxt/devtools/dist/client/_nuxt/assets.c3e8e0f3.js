import{_ as K}from"./NIconButton.vue.6924c323.js";import{_ as H}from"./Navbar.vue.1eab843e.js";import{a as j,M as J,r as T,e as V,o as s,h as c,i as f,u as n,f as e,l as E,F as N,q as O,c as F,w as z,v as S,s as G,N as ee,O as te,y as X,P as ne,K as se,k as W,p as y,Q as oe,R as ae,S as ie,t as w,T as q,U as le,V as re,W as ce,X as ue,Y as de,I as pe}from"./entry.f02d2ccc.js";import{_ as me}from"./NSectionBlock.2937e558.js";import{_ as fe}from"./FilepathItem.vue.063a2cdd.js";import{_ as he}from"./CodeSnippets.vue.22b03a10.js";import{u as _e,a as ve}from"./editor.721868d4.js";import{_ as ge}from"./DrawerRight.vue.58044cee.js";import{D as xe}from"./constants.d7bcda3c.js";import"./NIconTitle.vue.19793f87.js";import"./NCodeBlock.vue.e2044e41.js";import"./client.4ef5790f.js";const be={key:0,"h-full":"","w-full":"",flex:"","items-center":"","justify-center":""},we={for:"drop-zone-input","text-3xl":""},ye={key:1,relative:"","h-full":"","w-full":"",grid:"~ rows-[max-content_1fr_max-content]"},$e=e("div",{px6:"",py6:""},[e("h1",{"text-2xl":""}," Upload "),e("p",{"text-sm":"",op50:""}," Drag and drop files to upload ")],-1),ke={grid:"~ cols-minmax-8rem","overflow-auto":"",p6:""},Ce={flex:"","items-center":"","justify-center":"","of-hidden":"",rounded:"","rounded-t-lg":"","bg-active":"","object-cover":"",class:"aspect-1/1",border:"~ base"},Pe=["src"],Fe={flex:"~ gap1","items-center":""},Ae={flex:"~ gap-2","items-center":"","justify-center":"",p8:""},De=j({__name:"DropZone",props:{folder:{type:String,required:!0}},emits:["uploaded"],setup(o,{emit:t}){const m=o,l=J(),g=T(!1),k=T(),u=T([]),C=["image","video"];function L(a){k.value=a.target,g.value=!0}function B(a){a.target===k.value&&(g.value=!1)}function M(a){a.preventDefault()}function x(a){a.preventDefault(),h(a.dataTransfer.files)}function h(a){const _=Array.from(a||[]);if(_.length){const i=[],v=u.value.map(d=>d.name);for(const d of _)if(v.includes(d.name)){let b=1;const[P,R]=d.name.split(".");for(;v.includes(`${P} (${b}).${R}`);)b++;const U=`${P}-${b}.${R}`,Q=new Blob([d],{type:d.type}),Y=new File([Q],U,{lastModified:Date.now()});i.push(Y),v.push(U)}else d.type===""?l("Folders are not supported yet","carbon:face-dissatisfied"):C.some(b=>d.type.includes(b))?i.push(d):l(`"${d.type}" file type is not allowed`,"carbon:face-dizzy");u.value=[...u.value,...i]}}async function r(){if(ee.value||te.value)return;const a=[];for(const _ of u.value){const i=new FileReader;i.readAsDataURL(_);const d=(await new Promise(b=>{i.onload=()=>b(i.result)})).split(";base64,").pop();a.push({name:_.name,data:d})}await X.writeStaticAssets([...a],m.folder).then(()=>{t("uploaded"),I(),l("Files uploaded successfully!","carbon:face-cool")}).catch(_=>{console.error(_),I(),l("Upload failed!","carbon:face-dizzy")}),g.value=!1}function p(a){u.value?.splice(a,1)}function A(a){return URL.createObjectURL(a)}function $(a,_){const[i,v]=a.name.split("."),d=_.replace(/\.\w+$/,""),b=`${d}.${v}`;return d.length===0?(alert("File name must be at least 1 characters long"),i):(Object.defineProperty(a,"name",{value:b,writable:!1}),u.value.splice(u.value.indexOf(a),1,a),a)}function D(){u.value=[]}function I(){g.value=!1,D()}return V("dragenter",L),V("dragleave",B),V("dragover",M),V("drop",x),(a,_)=>{const i=K,v=ne,d=se,b=W;return s(),c("div",{fixed:"","bottom-0":"","left-13":"","right-0":"","top-0":"","z-10":"","backdrop-blur-20":"","transition-all":"",class:G(n(g)?"opacity-100 visible":"opacity-0 invisible")},[f(i,{icon:"carbon-close",absolute:"","right-5":"","top-5":"","z-20":"","text-xl":"",onClick:I}),n(u)?.length?(s(),c("div",ye,[$e,e("div",ke,[(s(!0),c(N,null,O(n(u),(P,R)=>(s(),c("div",{key:P.name,flex:"~ col gap-2",relative:"","h-50":"","w-40":"","items-center":""},[e("div",Ce,[e("img",{"h-full":"","w-full":"","rounded-t-lg":"","object-cover":"",src:A(P)},null,8,Pe)]),e("div",Fe,[f(d,{n:"xs","flex-auto":"","model-value":P.name,"onUpdate:modelValue":U=>$(P,U.target.value)},null,8,["model-value","onUpdate:modelValue"]),f(i,{icon:"carbon-delete","flex-none":"",title:"Remove file",onClick:U=>p(R)},null,8,["onClick"])])]))),128))]),e("div",Ae,[n(u).length?(s(),F(b,{key:0,n:"red",onClick:D},{default:z(()=>[f(v,{icon:"carbon-clean"}),E(" Clear ")]),_:1})):S("",!0),f(b,{disabled:!n(u).length,n:"primary solid",onClick:r},{default:z(()=>[f(v,{icon:"carbon-cloud-upload"}),E(" Upload ")]),_:1},8,["disabled"])])])):(s(),c("div",be,[e("label",we,[f(v,{icon:"carbon-cloud-upload","mr-2":""}),E(" Drop files here or click to select ")]),e("input",{id:"drop-zone-input",type:"file",multiple:"",hidden:"",onChange:_[0]||(_[0]=P=>h(P.target.files))},null,32)]))],2)}}}),Ie=j({__name:"AssetFontPreview",props:{asset:null},setup(o){const t=o,m=y(()=>`devtools-assets-${oe(t.asset)}`);return ae(y(()=>`
  @font-face {
    font-family: '${m.value}';
    src: url('${t.asset.publicPath}');
  }
`)),(l,g)=>(s(),c("div",{"of-hidden":"",style:ie({fontFamily:`'${n(m)}'`})}," Aa Bb Cc Dd Ee Ff Gg Hh Ii Jj Kk Ll Mm Nn Oo Pp Qq Rr Ss Tt Uu Vv Ww Xx Yy Zz ",4))}}),Ne={flex:"","items-center":"","justify-center":"","of-hidden":"","bg-active":"","object-cover":"",p1:""},Se=["src"],ze={key:2,"i-carbon-document":"","text-3xl":"",op20:""},Te={key:3,"w-full":"","self-start":"",p4:""},je=["textContent"],Be={key:4,"i-carbon-help":"","text-3xl":"",op20:""},Z=j({__name:"AssetPreview",props:{asset:null,textContent:null},setup(o){return(t,m)=>{const l=Ie;return s(),c("div",Ne,[o.asset.type==="image"?(s(),c("img",{key:0,src:o.asset.publicPath},null,8,Se)):o.asset.type==="font"?(s(),F(l,{key:o.asset.publicPath,asset:o.asset,"self-stretch":"",p2:"","text-2xl":""},null,8,["asset"])):o.asset.type==="text"&&!o.textContent?(s(),c("div",ze)):o.asset.type==="text"&&o.textContent?(s(),c("div",Te,[e("pre",{"max-h-10rem":"","of-hidden":"","font-mono":"","text-xs":"",textContent:w(o.textContent)},null,8,je)])):(s(),c("div",Be))])}}}),Ee={flex:"~ col gap-1",hover:"bg-active","items-center":"","of-hidden":"",rounded:"",p2:""},Le={"w-full":"","of-hidden":"",truncate:"","ws-nowrap":"","text-center":"","text-xs":""},Me=j({__name:"AssetGridItem",props:{asset:{},folder:{}},setup(o){const t=o,m=y(()=>t.folder&&t.asset.path.startsWith(t.folder)?t.asset.path.slice(t.folder.length):t.asset.path);return(l,g)=>{const k=Z;return s(),c("button",Ee,[f(k,{"h-30":"","w-30":"",rounded:"",border:"~ base",asset:l.asset},null,8,["asset"]),e("div",Le,w(n(m)),1)])}}}),Ue={flex:"~ gap-1","w-full":"","items-center":"",hover:"bg-active",rounded:"",px4:"",py2:""},Oe={"of-hidden":"",truncate:"","ws-nowrap":"","text-center":""},Re=j({__name:"AssetListItem",props:{asset:{}},setup(o){const t=o,m=y(()=>t.asset.type==="image"?"i-carbon-image":t.asset.type==="video"?"i-carbon-video":t.asset.type==="audio"?"i-carbon-volume-up":t.asset.type==="font"?"i-carbon-text-small-caps":t.asset.type==="text"?"i-carbon-document":t.asset.type==="json"?"i-carbon-json":"i-carbon-document-blank");return(l,g)=>(s(),c("button",Ue,[e("div",{class:G(n(m))},null,2),e("div",Oe,w(l.asset.path),1)]))}}),Ve={flex:"~ col gap-4","min-h-full":"","w-full":"","of-hidden":"",p4:""},Xe=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Preview "),e("div",{"x-divider":""})],-1),Ke={flex:"~","items-center":"","justify-center":""},qe=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Details "),e("div",{"x-divider":""})],-1),Ge={"max-w-full":"","w-full":"","table-fixed":""},We=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Filepath ",-1),Ze={flex:"~ gap-1","w-full":"","items-center":""},Qe=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Public Path ",-1),Ye={flex:"~ gap-1","w-full":"","items-center":"","of-hidden":""},He={"flex-auto":"","of-hidden":"",truncate:"","ws-pre":"","font-mono":""},Je=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Type ",-1),et={capitalize:""},tt=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Image Size ",-1),nt={key:0},st=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Aspect Ratio ",-1),ot=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," File size ",-1),at=e("td",{"w-30":"","ws-nowrap":"",pr5:"","text-right":"",op50:""}," Last modified ",-1),it={op70:""},lt=e("div",{flex:"~ gap2","mb--2":"","items-center":"",op50:""},[e("div",{"x-divider":""}),e("div",{"flex-none":""}," Actions "),e("div",{"x-divider":""})],-1),rt={flex:"~ gap2 wrap"},ct=e("div",{"flex-auto":""},null,-1),ut=j({__name:"AssetDetails",props:{asset:null},setup(o){const t=o,m=_e(),l=q(()=>{if(t.asset.type==="image")return X.getImageMeta(t.asset.filePath)}),g=q(()=>{if(t.asset.type==="text")return X.getTextAssetContent(t.asset.filePath)}),k=le(),u=y(()=>(k.value?._installedModules||[]).some(p=>p.meta?.name==="@nuxt/image"||p.meta?.name==="@nuxt/image-edge")),C=y(()=>{const r=[];if(t.asset.type==="image"){const p=l.value?.width?`
  width="${l.value.width}"
  height="${l.value.height}" `:" ";return r.push({lang:"vue-html",code:`<img${p}
  src="${t.asset.publicPath}"
/>`,name:"Plain Image"}),u.value&&r.push({lang:"vue-html",code:`<NuxtImage${p}
  src="${t.asset.publicPath}"
/>`,name:"Nuxt Image",docs:"https://image.nuxtjs.org/components/nuxt-img"},{lang:"vue-html",code:`<NuxtPicture${p}
  src="${t.asset.publicPath}"
/>`,name:"Nuxt Picture",docs:"https://image.nuxtjs.org/components/nuxt-picture"}),r}return r.push({lang:"html",code:`<a download href="${t.asset.publicPath}">
  Download ${t.asset.path.split("/").slice(-1)[0]}
</a>`,name:"Download link"}),r}),L=ve(),B=re(()=>t.asset.mtime),M=y(()=>{const r=t.asset.size;return r<1024?`${r} B`:r<1024*1024?`${(r/1024).toFixed(2)} KB`:`${(r/1024/1024).toFixed(2)} MB`}),x=y(()=>{if(!l.value?.width||!l.value?.height)return"";const r=(A,$)=>$?r($,A%$):A,p=r(l.value.width,l.value.height);return p>3?`${l.value.width/p}:${l.value.height/p}`:""}),h=y(()=>["image","text","video","font"].includes(t.asset.type));return(r,p)=>{const A=Z,$=fe,D=K,I=W,a=he;return s(),c("div",Ve,[n(h)?(s(),c(N,{key:0},[Xe,e("div",Ke,[f(A,{"max-h-80":"","min-h-20":"","min-w-20":"","w-auto":"",rounded:"",border:"~ base",asset:o.asset,"text-content":n(g)},null,8,["asset","text-content"])])],64)):S("",!0),qe,e("table",Ge,[e("tbody",null,[e("tr",null,[We,e("td",null,[e("div",Ze,[f($,{filepath:o.asset.filePath,"text-left":""},null,8,["filepath"]),f(D,{"flex-none":"",title:"Open in Editor",icon:"carbon-launch",onClick:p[0]||(p[0]=_=>n(m)(o.asset.filePath))})])])]),e("tr",null,[Qe,e("td",null,[e("div",Ye,[e("div",He,w(o.asset.publicPath),1),f(D,{"flex-none":"",title:"Copy public path",icon:"carbon-copy",onClick:p[1]||(p[1]=_=>n(L)(o.asset.publicPath))}),f(D,{"flex-none":"",to:o.asset.publicPath,icon:"carbon-launch",target:"_blank",title:"Open in browser"},null,8,["to"])])])]),e("tr",null,[Je,e("td",et,w(o.asset.type),1)]),n(l)?.width?(s(),c(N,{key:0},[e("tr",null,[tt,e("td",null,w(n(l).width)+" x "+w(n(l).height),1)]),n(x)?(s(),c("tr",nt,[st,e("td",null,w(n(x)),1)])):S("",!0)],64)):S("",!0),e("tr",null,[ot,e("td",null,w(n(M)),1)]),e("tr",null,[at,e("td",null,[E(w(new Date(o.asset.mtime).toLocaleString())+" ",1),e("span",it,"("+w(n(B))+")",1)])])])]),lt,e("div",rt,[f(I,{to:o.asset.publicPath,download:"",target:"_blank",icon:"carbon-download"},{default:z(()=>[E(" Download ")]),_:1},8,["to"]),o.asset.type==="image"?(s(),F(I,{key:0,disabled:"",icon:"carbon-image-service"},{default:z(()=>[E(" Optimize image (Coming soon) ")]),_:1})):S("",!0)]),ct,n(C).length?(s(),F(a,{key:1,border:"t base","mx--4":"","mb--4":"","code-snippets":n(C)},null,8,["code-snippets"])):S("",!0)])}}}),dt={"h-full":"","of-auto":""},pt={"flex-none":"",flex:"~ gap2 items-center"},mt={op50:""},ft={key:0},ht={"mt--4":"",px2:"",grid:"~ cols-minmax-8rem"},_t={key:1,p2:"",grid:"~ cols-minmax-8rem"},vt={key:1},It=j({__name:"assets",setup(o){const t=ce(),m=T(""),l=y(()=>new ue(t.value||[],{keys:["path"]})),g=y(()=>m.value?l.value.search(m.value).map(h=>h.item):t.value||[]),k=y(()=>{const x={};for(const h of g.value){const r=`${h.path.split("/").slice(0,-1).join("/")}/`;x[r]||(x[r]=[]),x[r].push(h)}return Object.entries(x).sort(([h],[r])=>h.localeCompare(r))}),u=T(),C=T("grid");function L(){C.value=C.value==="list"?"grid":"list"}de("Escape",()=>{u.value=void 0});const B=T();function M(){}return(x,h)=>{const r=K,p=H,A=De,$=Me,D=me,I=Re,a=ut,_=ge;return s(),c("div",dt,[f(p,{ref_key:"navbar",ref:B,search:n(m),"onUpdate:search":h[0]||(h[0]=i=>pe(m)?m.value=i:null),pb2:""},{actions:z(()=>[e("div",pt,[f(r,{"text-lg":"",icon:n(C)==="grid"?"i-carbon-list":"i-carbon-grid",title:"Toggle view",onClick:L},null,8,["icon"])])]),default:z(()=>[e("div",mt,[n(m)?(s(),c("span",ft,w(n(g).length)+" matched · ",1)):S("",!0),e("span",null,w(n(t)?.length)+" assets in total",1)])]),_:1},8,["search"]),f(A,{folder:"/",onUploaded:M}),n(C)==="grid"?(s(),c(N,{key:0},[n(k).length>1?(s(!0),c(N,{key:0},O(n(k),([i,v])=>(s(),F(D,{key:i,text:i,description:`${v.length} items`,open:v.length<=("DETAILS_MAX_ITEMS"in x?x.DETAILS_MAX_ITEMS:n(xe)),padding:!1},{default:z(()=>[e("div",ht,[(s(!0),c(N,null,O(v,d=>(s(),F($,{key:d.path,asset:d,folder:i,onClick:b=>u.value=d},null,8,["asset","folder","onClick"]))),128))])]),_:2},1032,["text","description","open"]))),128)):(s(),c("div",_t,[(s(!0),c(N,null,O(n(g),i=>(s(),F($,{key:i.path,asset:i,onClick:v=>u.value=i},null,8,["asset","onClick"]))),128))]))],64)):(s(),c("div",vt,[(s(!0),c(N,null,O(n(g),i=>(s(),F(I,{key:i.path,asset:i,onClick:v=>u.value=i},null,8,["asset","onClick"]))),128))])),f(_,{"model-value":!!n(u),"auto-close":"","w-120":"",navbar:n(B),onClose:h[1]||(h[1]=i=>u.value=void 0)},{default:z(()=>[n(u)?(s(),F(a,{key:0,asset:n(u)},null,8,["asset"])):S("",!0)]),_:1},8,["model-value","navbar"])])}}});export{It as default};
